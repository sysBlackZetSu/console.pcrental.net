(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7239],{33971:function(e,t,a){Promise.resolve().then(a.bind(a,22636))},52788:function(e,t,a){"use strict";var s,l=a(92317),r=a(76635);(s||(s={})).getDashboardData=async e=>(await (0,r.R1)((0,l.Z)("api/v2/team",e,"get-dashboard"))).data.data,t.Z=s},22636:function(e,t,a){"use strict";a.d(t,{default:function(){return W}});var s,l,r=a(57437),n=a(30390),i=a(11444);function d(e){let{title:t,description:a,media:s,children:l,contentClassName:d,className:c}=e;return(0,r.jsxs)("div",{className:(0,i.Z)("relative flex items-center justify-between rounded-lg bg-gray-100/60 p-5 sm:p-6 lg:p-7 dark:bg-gray-100",c),children:[(0,r.jsxs)("div",{className:(0,i.Z)(d),children:[(0,r.jsx)(n.Title,{as:"h2",className:"mb-2 text-2xl sm:mb-3 md:text-3xl",children:t}),a&&(0,r.jsx)(n.Text,{className:"mb-5 text-sm leading-[1.6] text-gray-700 sm:mb-6 sm:text-base md:mb-8 lg:mb-10",children:a}),l]}),s&&(0,r.jsx)("div",{children:s})]})}function c(e){let{...t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128",...t,children:[(0,r.jsx)("path",{fill:"#fac036",d:"M39.11 79.56c-1.1 1.03-2.21-.2-2.21-.2S18.42 59.78 17.22 58.9c-1.69-1.23-5.31-3.16-8.93.57-1.51 1.55-3.97 5 .6 10.56.99 1.2 29.78 31.54 31.46 33.18 0 0 13.3 12.94 21.35 17.81 2.23 1.35 4.74 2.78 7.67 3.78 2.92 1 6.22 1.69 9.7 1.69 3.48.04 7.09-.63 10.5-1.88 3.41-1.26 6.59-3.09 9.48-5.2.71-.54 1.43-1.08 2.1-1.66l1.94-1.6a58.67 58.67 0 0 0 3.82-3.53c2.43-2.42 4.62-5.01 6.55-7.66 1.92-2.66 3.55-5.41 4.85-8.15 1.3-2.74 2.21-5.49 2.76-8.09.58-2.59.74-5.04.65-7.18-.02-2.14-.45-3.97-.8-5.43-.4-1.46-.83-2.55-1.17-3.27-.33-.72-.51-1.1-.51-1.1-.46-1.29-.9-2.52-1.29-3.63a889.622 889.622 0 0 0-4.51-12.47l.01.03c-4.85-13.17-10.06-26.74-10.06-26.74-.79-2.39-3.7-3.22-5.84-1.68-6.18 4.44-8.07 10.92-5.89 17.83l5.59 15.32c.79 1.71-1.39 3.69-2.85 2.5-4.59-3.74-14.3-14.05-14.3-14.05-4.34-4.16-28.83-29.27-30.47-30.8-3.3-3.07-7.46-4.65-10.63-2.32-3.24 2.38-4.14 6.06-1.01 10.08.85 1.09 25.6 27.24 25.6 27.24 1.44 1.51-.26 3.65-1.85 2.18 0 0-30.79-32.12-32.18-33.62-3.15-3.42-8.21-4.17-11.21-1.35-2.93 2.75-2.86 7.26.34 10.8 1.02 1.12 22.71 24.02 31.39 33.4.58.63 1.03 1.47.17 2.26-.01.01-.88.95-2-.25-2.36-2.52-25.93-27.08-27.24-28.41-3.01-3.06-7.05-4.51-10.3-1.53-2.96 2.71-3.44 7.44-.04 10.78l28.55 30.18s.93 1.1-.11 2.07z"}),(0,r.jsx)("path",{fill:"#e48c15",d:"m85.46 54.4 2.41 2.58s-13.79 13.31-4.39 33.75c0 0 1.22 2.59-.38 3.02 0 0-1.4.78-3-3.2 0-.01-9.49-19.42 5.36-36.15z"}),(0,r.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:10,strokeWidth:4,opacity:.5,d:"M63.28 10.2s5.81.88 11.19 6.64c5.38 5.77 7.87 13.18 7.87 13.18M77.44 3.5s4.87 2.45 8.63 8.5c3.76 6.05 4.67 13.05 4.67 13.05m-55.03 85.68s-5.86.39-12.35-4.09-10.52-11.18-10.52-11.18m18.69 25.1s-5.44.23-11.68-3.22-10.44-9.12-10.44-9.12"})]})}var o=a(77072),x=a(52788),u=a(48627),m={src:"/_next/static/media/undraw_welcome.87cec8d6.svg",height:701,width:613,blurWidth:0,blurHeight:0},h=a(71976),f=a(18087),p=a(66648),g=a(2265),b=a(72655),v=a(88864);let j={sm:"rounded-sm",DEFAULT:"rounded-lg",lg:"rounded-xl",xl:"rounded-2xl"};function N(e,t){let{title:a,action:s,description:l,rounded:d="DEFAULT",className:c,headerClassName:o,actionClassName:x,titleClassName:u,descriptionClassName:m,children:h}=e;return(0,r.jsxs)("div",{className:(0,i.Z)("border border-muted bg-gray-0 p-5 dark:bg-gray-50 lg:p-7",j[d],c),ref:t,children:[(0,r.jsxs)("div",{className:(0,i.Z)(s&&"flex items-start justify-between",o),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Title,{as:"h3",className:(0,i.Z)("text-base font-semibold sm:text-lg",u),children:a}),l&&(0,r.jsx)("div",{className:m,children:l})]}),s&&(0,r.jsx)("div",{className:(0,i.Z)("ps-2",x),children:s})]}),h]})}var y=(0,g.forwardRef)(N);function w(e){let{name:t="filter",options:a,onChange:s,className:l,btnClassName:d,defaultActive:c,activeClassName:o}=e,[x,u]=(0,g.useState)(c||a[a.length-1]);return(0,r.jsx)("div",{className:(0,i.Z)("flex items-center gap-1 font-medium",l),children:a.map(e=>(0,r.jsx)(n.AdvancedRadio,{name:t,value:e,onChange:e=>{var t;return t=e.target.value,void(u(()=>t),s&&s(t))},contentClassName:"min-w-[unset] min-h-[auto] text-center border-0 ring-0 peer-checked:ring-0 px-2",className:(0,i.Z)("rounded-md transition-all duration-200 hover:cursor-pointer",x===e?"bg-gray-100 text-gray-900 dark:text-gray-700":"text-gray-600",d,x===e&&o),children:e},"filter-".concat(e)))})}N.displayName="WidgetCard";var k=a(35231),_=a(483),C=a(54142),T=a(85475),E=a(86991);function S(e){var t,a;let{label:s,prefix:l,active:d,postfix:c,payload:o,className:x,formattedNumber:u}=e;return d&&o?(0,r.jsxs)("div",{className:(0,i.Z)("rounded-md border border-gray-300 bg-gray-0 shadow-2xl dark:bg-gray-100",x),children:[(0,r.jsx)(n.Text,{className:"label mb-0.5 block bg-gray-100 p-2 px-2.5 text-center font-lexend text-xs font-semibold capitalize text-gray-600 dark:bg-gray-200/60 dark:text-gray-700",children:o&&(null===(a=o[0])||void 0===a?void 0:null===(t=a.payload)||void 0===t?void 0:t.date_string)}),(0,r.jsx)("div",{className:"px-3 py-1.5 text-xs",children:null==o?void 0:o.map((e,t)=>{var a;return(0,r.jsxs)("div",{className:"chart-tooltip-item flex items-center py-1.5",children:[(0,r.jsx)("span",{className:"me-1.5 h-2 w-2 rounded-full",style:{backgroundColor:(a=e.fill,/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(a))?"#fff"===e.fill?e.stroke:e.fill:e.stroke}}),(0,r.jsxs)(n.Text,{children:[(0,r.jsxs)(n.Text,{as:"span",className:"capitalize",children:[e.dataKey.replace(/([a-z])([A-Z])/g,"$1 $2"),":"]})," ",(0,r.jsxs)(n.Text,{as:"span",className:"font-medium text-gray-900 dark:text-gray-700",children:[l&&l,u?function e(t){return t<0?"-".concat(e(Math.abs(t))):t>=1e9?"".concat((t/1e9).toFixed(1),"B"):t>=1e6?"".concat((t/1e6).toFixed(1),"M"):t>=1e3?"".concat((t/1e3).toFixed(1),"K"):t.toString()}(e.value):e.value.toLocaleString({maximumFractionDigits:3}),c&&c]})]})]},e.dataKey+t)})})]}):null}var A=a(87138),L=a(25511);function O(e){let{active:t=!0,children:a,displayContent:s,overlayClassName:l}=e;return t?(0,r.jsxs)("div",{className:"relative flex h-full w-full",children:[(0,r.jsxs)("div",{className:(0,i.Z)("relative z-0 h-full w-full blur-md [&_*]:select-none",l),children:[a,(0,r.jsx)("div",{className:"absolute inset-0 h-full w-full bg-gray-200 bg-opacity-50 blur-md transition-opacity"})]}),(0,r.jsx)("div",{className:"absolute w-full items-center place-self-center text-center",children:s})]}):(0,r.jsx)(r.Fragment,{children:a})}(s=l||(l={})).BILLING_INFORMATION_NOT_AVAILABLE="BILLING_INFORMATION_NOT_AVAILABLE",s.RESOURCE_ACCESS_FORBIDDEN="RESOURCE_ACCESS_FORBIDDEN";let D=(e,t)=>e===l.BILLING_INFORMATION_NOT_AVAILABLE?t("error.billing-information-not-available"):e===l.RESOURCE_ACCESS_FORBIDDEN?t("error.resource-access-forbidden"):void 0;function F(e){var t;let{className:a,balanceData:s,errorType:l,isLoading:d}=e,c=(0,f.useTranslations)("dashboard"),[o,x]=(0,g.useState)([]),[u,m]=(0,g.useState)(30),[h,p]=(0,g.useState)([]),v=[{value:3,label:c("expenditure.3-day")},{value:7,label:c("expenditure.1-week")},{value:14,label:c("expenditure.2-week")},{value:21,label:c("expenditure.3-week")},{value:30,label:c("expenditure.1-month")}],j=v.map(e=>e.label);return(0,g.useEffect)(()=>{p(o.slice(31-u))},[o]),(0,g.useEffect)(()=>{s?x(s.map(e=>({...e,[c("expenditure.title")]:e.burn}))):x([])},[s]),(0,r.jsx)(y,{title:c("monthly-expenditure"),description:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["".concat(Number(o.reduce((e,t)=>e+Number(t[c("expenditure.title")]),0)).toLocaleString("en-US",{maximumFractionDigits:3}))," ",(0,r.jsx)(b.u70,{className:"text-lg text-yellow-500"})]}),titleClassName:"text-gray-500 font-normal font-inter !text-sm",descriptionClassName:"text-lg font-semibold sm:text-xl 3xl:text-2xl text-gray-900 font-lexend mt-1",action:(0,r.jsx)(A.default,{href:L._.payments.balances,children:(0,r.jsx)(n.Button,{variant:"outline",size:"sm",className:"text-sm",children:c("details")})}),headerClassName:"mb-6",className:(0,i.Z)("flex flex-col",a),children:(0,r.jsx)("div",{className:"grid flex-grow grid-cols-1 gap-3",children:d?(0,r.jsx)("div",{className:"grid flex-grow place-content-center items-center",children:(0,r.jsx)(n.Loader,{variant:"spinner",size:"xl"})}):(0,r.jsxs)(O,{displayContent:(0,r.jsx)(n.Text,{className:"px-12 text-xl font-semibold text-gray-600",children:D(l,c)}),active:""!=l,children:[(0,r.jsx)(w,{options:j,defaultActive:(null===(t=v.find(e=>e.value===u))||void 0===t?void 0:t.label)||"",onChange:e=>(function(e){var t,a;let s=31-((null===(t=v.find(t=>t.label===e))||void 0===t?void 0:t.value)||3);m((null===(a=v.find(t=>t.label===e))||void 0===a?void 0:a.value)||3),p(o.slice(s))})(e),btnClassName:"@sm:px-2.5",className:"justify-between self-start rounded-lg border border-muted p-1.5"}),(0,r.jsx)("div",{className:"mt-auto h-64 w-full @sm:h-72 @sm:pt-3 @7xl:h-[240px] lg:pb-2",children:(0,r.jsx)(k.h,{width:"100%",height:"100%",children:(0,r.jsxs)(_.T,{data:h,margin:{top:6,bottom:30},children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"expenditure",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.125}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#ffdadf",stopOpacity:.05})]})}),(0,r.jsx)(C.q,{strokeDasharray:"8 10",strokeOpacity:.5,vertical:!1}),(0,r.jsx)(T.u,{content:(0,r.jsx)(S,{})}),(0,r.jsx)(E.u,{type:"bump",dataKey:c("expenditure.title"),stroke:"#10b981",strokeWidth:2.3,fillOpacity:1,fill:"url(#expenditure)",animationDuration:300})]})})})]})})})}var I=a(59910),Z=a(37692);let R=(0,I.cn)([{key:"running",label:"running-machines",shortLabel:"machine-state.running",value:0,color:"#22c55e",icon:Z.tVp},{key:"deploying",label:"deploying-machines",shortLabel:"machine-state.deploying",value:0,color:"#f59e0b",icon:Z.F$7}]);(0,I.cn)(e=>e(R));var B=a(53742),M=a(23909),z=a(85369),K=a(68295);function U(e){let{className:t,machineStatsData:a}=e,s=(0,f.useTranslations)("dashboard"),[l,d]=(0,B.KO)(R),c=e=>{d(t=>t.map(t=>{let a=e.findIndex(e=>e.key===t.key);return a>-1?{...t,value:e[a].value}:t}))};return(0,g.useEffect)(()=>{c(a)},[a]),(0,r.jsx)("div",{className:(0,i.Z)("flex flex-col gap-5 border-0 p-0 lg:p-0 3xl:-mt-20 3xl:h-[200px]",t),children:(0,r.jsxs)("div",{className:"grid items-start gap-x-5 p-5 @xl:grid-cols-2 lg:p-7",children:[(0,r.jsx)("div",{className:"mb-6 w-full @4xl:mb-0",children:(0,r.jsx)("div",{className:"mx-auto h-44 w-44",children:(0,r.jsx)(k.h,{width:"100%",height:"100%",children:(0,r.jsx)(M.u,{className:"[&_.recharts-layer:focus]:outline-none [&_.recharts-sector:focus]:outline-none dark:[&_.recharts-text.recharts-label]:first-of-type:fill-white",children:(0,r.jsx)(z.b,{data:l,cx:"50%",cy:"50%",paddingAngle:1,outerRadius:70,stroke:"transparent",innerRadius:40,dataKey:"value",children:l.map((e,t)=>(0,r.jsx)(K.b,{fill:e.color},t))})})})})}),(0,r.jsxs)("div",{className:"place-self-center",children:[l.map((e,t)=>(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between gap-4 border-b border-muted pb-4 last:mb-0 last:border-0 last:pb-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)("span",{className:"me-2 h-2 w-2 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsx)(n.Title,{as:"h5",className:" text-sm font-medium",children:s(e.label)})]}),(0,r.jsx)(n.Text,{as:"span",children:e.value})]},t)),(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between gap-4 border-b border-muted pb-4 last:mb-0 last:border-0 last:pb-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)("span",{className:"me-2 h-2 w-2 rounded-full bg-sky-500"}),(0,r.jsx)(n.Title,{as:"h5",className:" text-sm font-medium",children:s("total-machines")})]}),(0,r.jsx)(n.Text,{as:"span",children:l.reduce((e,t)=>e+t.value,0)})]})]})]})})}function V(e){let{className:t,machineStatsData:a}=e,s=(0,f.useTranslations)("dashboard"),[l,d]=(0,B.KO)(R);return(0,r.jsx)(y,{title:s("machine-state.title"),titleClassName:"text-base font-semibold text-lg",className:(0,i.Z)("flex flex-col",t),children:(0,r.jsxs)("div",{className:"flex h-full flex-wrap justify-evenly",children:[(0,r.jsx)("div",{className:"mt-3 columns-2 items-start 2xl:mt-5",children:l.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"mr-3 rounded p-3 text-white",style:{backgroundColor:e.color},children:(0,r.jsx)(e.icon,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Text,{className:"!text-nowrap text-gray-500",children:s(e.shortLabel)}),(0,r.jsx)(n.Text,{className:"font-lexend text-sm font-semibold text-gray-900 dark:text-gray-700 2xl:text-base",children:Number(e.value).toLocaleString("vi-VN")})]})]},t))}),(0,r.jsx)(U,{machineStatsData:a})]})})}function W(){let e=(0,f.useTranslations)("dashboard"),t=(0,v.v9)(e=>e.auth),a=(0,v.v9)(e=>e.teams),[s,l]=(0,g.useState)([]),[i,j]=(0,g.useState)(),[N,y]=(0,g.useState)(!0),[w,k]=(0,g.useState)(void 0),_=async()=>{u.ZP.show(o.n.deployMachinePresentation)},C=()=>{var e;y(!0),(null===(e=a.current)||void 0===e?void 0:e.uuid)&&x.Z.getDashboardData(a.current.uuid).then(e=>{k(""),e&&j(e),y(!1)}).catch(e=>{j(void 0),k(e.response.data.type),l([{key:"running",value:0},{key:"deploying",value:0}]),y(!1)})};return(0,g.useEffect)(()=>{C()},[a.current,t.current]),(0,g.useEffect)(()=>{i&&l([{key:"running",value:i.machine.running||0},{key:"deploying",value:i.machine.deploying||0}])},[i]),(0,r.jsx)("div",{className:"@container",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 @4xl:grid-cols-2 @7xl:grid-cols-12 3xl:gap-8",children:[(0,r.jsx)(d,{title:(0,r.jsx)(()=>{var s,l,n,i,d;let o=(null===(s=t.current)||void 0===s?void 0:s.team.uuid)==(null===(l=a.current)||void 0===l?void 0:l.uuid);return(0,r.jsxs)(r.Fragment,{children:[e("welcome-card-title"),(0,r.jsx)("br",{}),!o&&t.current&&a.teams.length>0&&(0,r.jsxs)(r.Fragment,{children:[null===(n=a.current)||void 0===n?void 0:n.title,(0,r.jsx)(h.Z,{className:"mx-2 inline-flex h-8 w-8"})]}),(null===(i=t.current)||void 0===i?void 0:i.user.first_name)||(null===(d=t.current)||void 0===d?void 0:d.user.username),(0,r.jsx)(c,{className:"ms-2 inline-flex h-8 w-8"})]})},{}),description:e("welcome-card-content"),media:(0,r.jsx)("div",{className:"lg:w-[320px w-[300px] text-right @2xl:block max-sm:hidden 2xl:w-[330px]",children:(0,r.jsx)(p.default,{src:m,width:200,alt:"Welcome shop image form freepik",className:"dark:brightness-95 dark:drop-shadow-md"})}),contentClassName:"@2xl:max-w-[calc(100%-340px)]",className:"border border-muted bg-gray-0 pb-8 @4xl:col-span-2 @7xl:col-span-8 dark:bg-gray-100/30 lg:pb-9",children:(0,r.jsxs)(n.Button,{className:"me-8 cursor-pointer",onClick:_,children:[(0,r.jsx)(b.tec,{className:"me-2 h-5 w-5"})," ",e("deploy-machine")]})}),(0,r.jsx)(V,{className:"@2xl:grid-cols-3 @3xl:gap-6 @7xl:col-span-8",machineStatsData:s}),(0,r.jsx)(F,{className:"h-[464px] @sm:h-[520px] @7xl:col-span-4 @7xl:col-start-9 @7xl:row-start-1 @7xl:row-end-3 @7xl:h-full",balanceData:null==i?void 0:i.credit_burn,errorType:w,isLoading:N})]})})}}},function(e){e.O(0,[2864,7142,3665,8218,6950,9870,8173,6164,4480,231,6907,6315,9486,6176,9772,1014,5524,1444,3742,8247,616,1029,8767,7072,2971,7023,1744],function(){return e(e.s=33971)}),_N_E=e.O()}]);