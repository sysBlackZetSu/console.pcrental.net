"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2196],{48467:function(e,a,t){t.d(a,{Z:function(){return i}});var n=t(57437),r=t(66648);function i(e){let{width:a=500,height:t=500,alt:i="no-result-found"}=e;return(0,n.jsx)(r.default,{src:"/no-result-found-400x400.png",alt:i,width:a,height:t,className:"dark:invert-[90%]"})}},26717:function(e,a,t){t.d(a,{Z:function(){return s}});var n=t(57437),r=t(11444),i=t(30390);function s(e){let{className:a,loaderProps:t}=e;return(0,n.jsx)("div",{className:(0,r.Z)("",a),children:(0,n.jsx)(i.Loader,{variant:"spinner",size:"xl",...t})})}},42736:function(e,a,t){var n,r=t(92317),i=t(76635);!function(e){let a="api/user",t="api/v2/user";e.signIn=async(e,t)=>(await (0,i.sg)((0,r.Z)(a,"login"),{email:e,password:t})).data,e.verifyEmail=async e=>(await (0,i.sg)((0,r.Z)(a,"verify-before-register"),{email:e})).data,e.validateUsernameAvailable=async e=>{try{return(await (0,i.sg)((0,r.Z)(a,"validate-username"),{username:e})).data.data.valid}catch(e){return!1}},e.createUser=async e=>(await (0,i.sg)((0,r.Z)(a,"create"),e)).data,e.resentOtp=async e=>(await (0,i.sg)((0,r.Z)(t,"resent-otp"),{email:e})).data.data,e.getAuthUser=async()=>(await (0,i.R1)((0,r.Z)(a,"me"))).data.data,e.signOut=async()=>(await (0,i.sg)((0,r.Z)(a,"logout"))).data,e.changePassword=async(e,t)=>(await (0,i.sg)((0,r.Z)(a,"change-password"),{current_password:e,new_password:t})).data,e.updatesProfile=async e=>(await (0,i.sg)((0,r.Z)(a,"update-profile"),e)).data,e.getCfg=async e=>{let t=await (0,i.R1)((0,r.Z)(a,"options"));return e&&t.data.data?t.data.data[e]:t.data.data},e.setCfg=async(e,t)=>(await (0,i.sg)((0,r.Z)(a,"options"),{name:e,value:t})).data.data,e.getMasterPassword=async()=>(await (0,i.R1)((0,r.Z)(a,"master-password"))).data.data,e.getOnboard=async()=>(await (0,i.R1)((0,r.Z)(a,"onboard"))).data.data,e.getUserNotification=async()=>(await (0,i.R1)((0,r.Z)(a,"notifies","me"))).data.data,e.invitations={id:async e=>(await (0,i.R1)((0,r.Z)(t,"invitation",e))).data.data,accept:async e=>(await (0,i.sg)((0,r.Z)(t,"invitation",e,"accept"))).data.data,decline:async e=>(await (0,i.sg)((0,r.Z)(t,"invitation",e,"decline"))).data.data},e.notification={list:async()=>(await (0,i.R1)((0,r.Z)(a,"notifies","me"))).data.data,id:async e=>(await (0,i.R1)((0,r.Z)(a,"notifies",e))).data.data,read:async e=>(await (0,i.pE)((0,r.Z)(a,"notifies",e,"read"))).data.data,readAll:async()=>(await (0,i.pE)((0,r.Z)(a,"notifies","read-all"))).data.data},e.forgotPassword={requestReset:async e=>(await (0,i.sg)((0,r.Z)(t,"request-reset-password"),{email:e})).data.data,resetPassword:async(e,a,n)=>(await (0,i.sg)((0,r.Z)(t,"reset-password"),{nonce:e,password:a,email:n})).data.data}}(n||(n={})),a.Z=n},13966:function(e,a,t){t.d(a,{N:function(){return n}});var n,r=t(76635),i=t(92317);!function(e){let a="api/user/billing";e.updates=async e=>(await (0,r.sg)((0,i.Z)(a,"updates"),e)).data.data,e.getMe=async()=>(await (0,r.R1)((0,i.Z)(a,"me"))).data.data}(n||(n={}))},52788:function(e,a,t){var n,r=t(92317),i=t(76635);(n||(n={})).getDashboardData=async e=>(await (0,i.R1)((0,r.Z)("api/v2/team",e,"get-dashboard"))).data.data,a.Z=n},69038:function(e,a,t){t.d(a,{J:function(){return r.Z},Nj:function(){return n.N}}),t(76635),t(42736);var n=t(13966),r=t(54209);t(70934),t(36522),t(51064),t(3200),t(77915),t(52788)},77915:function(e,a,t){var n,r=t(76635),i=t(92317);!function(e){let a="api/user/transaction";e.getBalanceInvoices=async()=>(await (0,r.R1)((0,i.Z)(a,"balance-transactions"))).data.data,e.getChargeInvoices=async()=>(await (0,r.R1)((0,i.Z)(a,"payment-transactions"))).data.data,e.getChargeInvoiceDetails=async e=>(await (0,r.R1)((0,i.Z)(a,"payment-transactions",e))).data.data}(n||(n={})),a.Z=n},54209:function(e,a,t){var n,r=t(76635),i=t(92317);!function(e){let a="/api/v2/instance",t="/api/team";e.getMachineSizes=async e=>{let t=await (0,r.R1)("".concat(a,"/machine-sizes"),{signal:e});return await t.data.data},e.getOffers=async()=>(await (0,r.R1)("".concat(a,"/offers"))).data.data,e.getTeamSingleMachines=async e=>(await (0,r.R1)("".concat(t,"/").concat(e,"/machines/single"))).data.data||[],e.getTeamMachines=async e=>(await (0,r.R1)("".concat(t,"/").concat(e,"/machines/all"))).data.data||[],e.getTeamMachineMixed=async e=>(await (0,r.R1)("".concat(t,"/").concat(e,"/machines/mixed"))).data.data||[],e.getMachineDetail=async e=>(await (0,r.R1)("".concat(a,"/").concat(e))).data.data,e.getTeamClusters=async e=>(await (0,r.R1)("".concat(t,"/").concat(e,"/machine-cluster/list"))).data.data||[],e.getMachineCluster=async e=>(await (0,r.R1)("".concat(a,"/machine-cluster/").concat(e))).data.data,e.deploySingle=async e=>(await (0,r.sg)("".concat(a,"/deploy/single"),e)).data.data,e.deployMultiple=async e=>(await (0,r.sg)("".concat(a,"/deploy/multiple"),e)).data.data,e.deployThinkBoxDeadline=async e=>(await (0,r.sg)("".concat(a,"/deploy/multiple/repository"),e)).data.data,e.addMachineToGroup=async e=>(await (0,r.sg)((0,i.Z)(a,"deploy/push-multiple"),e)).data.data,e.createGSRemoteSession=async e=>(await (0,r.sg)("".concat(a,"/").concat(e,"/gs-remote-session"))).data.data,e.updateMachine=async(e,t)=>(await (0,r.pE)("".concat(a,"/").concat(e),t)).data.data,e.disabledRenewalMachine=async e=>(await (0,r.pE)("".concat(a,"/").concat(e,"/disable-renewal"))).data.data,e.enableRenewalMachine=async e=>(await (0,r.pE)("".concat(a,"/").concat(e,"/enable-renewal"))).data.data,e.deletesMachine=async e=>(await (0,r.QW)("".concat(a,"/").concat(e))).data.data,e.getStock=async e=>(await (0,r.R1)("".concat(a,"/system-stocks"),{signal:e})).data.data||[]}(n||(n={})),a.Z=n},3200:function(e,a,t){var n=t(93375);let r=(0,t(34999).io)("https://socket.pcrental.net",{autoConnect:!1,reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:3,transports:["websocket"],upgrade:!1,forceNew:!0,query:{token:(0,n.getCookie)("access_token")}});a.Z=r},51064:function(e,a,t){var n,r=t(76635),i=t(92317);(n||(n={})).getSystemOperatingSystems=async e=>(await (0,r.R1)((0,i.Z)("api/v2/instance","system-templates"),{signal:e})).data.data||[],a.Z=n},74285:function(e,a,t){t.d(a,{s:function(){return c}});var n=t(59910),r=t(53742),i=t(18087);let s=(0,n.cn)({title:"",message:"",isOpen:!1,size:"sm",preventClose:!1,onOk:()=>{},onCancel:()=>{}});function c(){let e=(0,r.Dv)(s),a=(0,r.b9)(s),t=(0,i.useTranslations)("common");return{...e,openConfirmationModal:n=>{let{title:r,message:i,customSize:s="360px",preventClose:c,size:l="sm",okText:o=t("yes"),onOk:d,cancelText:u=t("no"),onCancel:m}=n;a({...e,isOpen:!0,preventClose:c,title:r,message:i,customSize:s,size:l,okText:o,onOk:d,cancelText:u,onCancel:m})},closeConfirmationModal:()=>{a({...e,isOpen:!1})},setPreventClose:t=>{a({...e,preventClose:t})}}}},41349:function(e,a,t){t.d(a,{d:function(){return s}});var n=t(59910),r=t(53742);let i=(0,n.cn)({isOpen:!1,preventClose:!1,view:null,customSize:"320px",size:"sm"});function s(){let e=(0,r.Dv)(i),a=(0,r.b9)(i);return{...e,openModal:t=>{let{view:n,customSize:r,preventClose:i,size:s}=t;a({...e,isOpen:!0,preventClose:i,view:n,customSize:r,size:s})},closeModal:()=>{a({...e,isOpen:!1})},setPreventClose:t=>{a({...e,preventClose:t})}}}},18105:function(e,a,t){t.d(a,{Z:function(){return J}});var n,r,i,s,c=t(57437),l=t(16463),o=t(2265),d=t(30390),u=t(18087),m=t(93363),p=t(92317),g=t(76635);!function(e){let a="api/user/onepay";e.createOrderCard=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(await (0,g.sg)((0,p.Z)(a,"create-order-credit"),{amount:e,token_uuid:t,redirect:n})).data.data},e.createOrderAtm=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(await (0,g.sg)((0,p.Z)(a,"create-order-atm"),{amount:e,token_uuid:t,redirect:n})).data.data},e.createOrderQR=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(await (0,g.sg)((0,p.Z)(a,"create-order-qr"),{amount:e,redirect:t})).data.data},e.createOrderApplePay=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(await (0,g.sg)((0,p.Z)(a,"create-order-apple"),{amount:e,token_uuid:t,redirect:n})).data.data},e.getMyTokens=async()=>(await (0,g.R1)((0,p.Z)(a,"my-token"))).data.data,e.createTransaction=async a=>{let{type:t,amount:n,token_uuid:r=null,redirect:i=null}=a;return"card"==t?e.createOrderCard(n,r,i):"atm"==t?e.createOrderAtm(n,r,i):"qr"==t?e.createOrderQR(n,i):"apple"==t?e.createOrderApplePay(n,i):null}}(r||(r={}));var h=r,f=t(59772),y=t(11060);let x=f.z.object({credit:f.z.preprocess(e=>parseFloat(f.z.string().parse(e)),f.z.number({message:y.s.creditIsRequired}).int({message:y.s.creditIsInteger}).gte(1,{message:y.s.creditMin}).lte(1e4,{message:y.s.creditMax})),paymentMethod:f.z.string().min(1,{message:y.s.paymentMethodIsRequired}),token_uuid:f.z.string().optional()});var v=t(40932),w=t(39343),b=t(63872),N=t(37692),j=t(27776),k=t(26717),C=t(60168),A=t(46231),Z=t.n(A);let M=(e,a,t)=>(parseInt(e)*a).toLocaleString("en-US",{currency:"vi-VN"===t?"VND":"USD",style:"currency"}),S=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"đồng",r=parseInt(e)*a;if("vi"===t){if(0===r)return"đồng"==n?"Kh\xf4ng đồng":"Kh\xf4ng đ\xf4 la Mỹ";if(r>9999999999999)return"Số tiền qu\xe1 lớn";var i=["kh\xf4ng","một","hai","ba","bốn","năm","s\xe1u","bảy","t\xe1m","ch\xedn"],s=(e,a)=>{var t="",n=Math.floor(e/10),r=e%10;return n>1?(t=" "+i[n]+" mươi",1==r&&(t+=" mốt")):1==n?(t=" mười",1==r&&(t+=" một")):a&&r>0&&(t=" lẻ"),5==r&&n>=1?t+=" lăm":4==r&&n>=1?t+=" tư":(r>1||1==r&&0==n)&&(t+=" "+i[r]),t},c=(e,a)=>{var t=Math.floor(e/100),e=e%100;return a||t>0?" "+i[t]+" trăm"+s(e,!0):s(e,!1)},l=(e,a)=>{var t="",n=Math.floor(e/1e6),e=e%1e6;n>0&&(t=c(n,a)+" triệu",a=!0);var r=Math.floor(e/1e3),e=e%1e3;return r>0&&(t+=c(r,a)+" ng\xe0n",a=!0),e>0&&(t+=c(e,a)),t};return((e,a)=>{if(0==e)return"kh\xf4ng";var t="",n="";do var r=e%1e9,e=Math.floor(e/1e9),t=e>0?l(r,!0)+n+t:l(r,!1)+n+t,n=" tỷ";while(e>0);return t.trim()+" "+a})(r,n)}if("en"===t)return r>9999999999999?"Amount too large":Z().toWords(r)+" "+n};var T=t(93375),B=e=>{let{t:a}=e;return(0,c.jsxs)("div",{className:"relative flex items-center py-3",children:[(0,c.jsx)("div",{className:"flex-grow border-t border-gray-400"}),(0,c.jsx)("span",{className:"mx-4 flex-shrink text-gray-400",children:a("topup-modal.or-text")}),(0,c.jsx)("div",{className:"flex-grow border-t border-gray-400"})]})};let R=[{id:"1",name:"Techcombank",card:"970407"},{id:"2",name:"Tienphongbank",card:"970423"},{id:"3",name:"Vietinbank",card:"970415"},{id:"4",name:"VIB",card:"970441"},{id:"5",name:"VietA",card:"970427"},{id:"6",name:"MSB",card:"970426"},{id:"7",name:"EXIM",card:"970431"},{id:"8",name:"SHB",card:"970443"},{id:"9",name:"HDBank",card:"970437"},{id:"10",name:"Vietcombank",card:"970436"},{id:"11",name:"DongAbank",card:"970406"},{id:"12",name:"MB",card:"970422"},{id:"13",name:"NAB",card:"970428"},{id:"14",name:"SEABANK",card:"970440"},{id:"15",name:"OCEANBANK",card:"970414"},{id:"16",name:"BIDV",card:"970418"},{id:"17",name:"BACA",card:"970409"},{id:"18",name:"VPBANK",card:"970432"},{id:"19",name:"NCB (NAVIBANK)",card:"970419"},{id:"20",name:"AGRIBANK",card:"970405"},{id:"21",name:"SAIGONBANK (SCB)",card:"970429"},{id:"22",name:"SACOMBANK",card:"970403"},{id:"23",name:"AnBinh Bank",card:"970425"},{id:"24",name:"PVCom Bank",card:"970412"},{id:"25",name:"VCCB (Bản Việt)",card:"970454"},{id:"26",name:"ACB",card:"9704161"},{id:"27",name:"GPBank",card:"9704081"},{id:"28",name:"OCB",card:"9704481"},{id:"29",name:"LienVietPostBank",card:"9704491"},{id:"30",name:"BAOVIET Bank",card:"9704381"},{id:"31",name:"Kienlongbank",card:"9704521"},{id:"32",name:"VRB",card:"9704211"},{id:"33",name:"Public Bank Vietnam",card:"9704391"},{id:"34",name:"SAIGONBANK",card:"9704001"},{id:"35",name:"PG Bank",card:"9704301"},{id:"36",name:"IVB",card:"9704341"},{id:"37",name:"Wooribank",card:"9704571"},{id:"38",name:"UOB Vietnam",card:"9704581"},{id:"39",name:"Shinhan Bank Vietnam",card:"9704241"},{id:"40",name:"Techcombank 9704071 Nhập",card:"thẻ"},{id:"41",name:"TINVIET(Vietcredit)",card:"9704601"},{id:"42",name:"VIETBANK",card:"9704331"}],O=[{label:"qr-code-label",value:"qr",icon:(0,c.jsx)(b.Qzy,{})},{label:"international-payment-card-label",value:"card",icon:(0,c.jsx)(b._02,{})},{label:"domestic-payment-card-label",value:"atm",icon:(0,c.jsx)(b._02,{})},{label:"apple-pay-label",value:"apple",icon:(0,c.jsx)(b.oPZ,{})}],_=e=>{let{value:a}=e,t=(0,u.useTranslations)("payment.balance");return O.map(e=>(0,c.jsxs)(d.AdvancedRadio,{name:"paymentMethod",value:e.value,checked:e.value===a,contentClassName:"bg-gray-100 text-gray-900 flex items-center gap-2",children:[e.icon,t("topup-modal.payment-methods.".concat(e.label)),e.value==a&&(0,c.jsx)(b.l_A,{className:"ml-auto text-primary"})]},e.label))};var E=t(25524);function I(e){let{defaultDeposit:a}=e,t=(0,u.useTranslations)("payment.balance"),{createTransaction:n}=function(){let{mutate:e,isPending:a}=(0,E.D)({mutationKey:["create-transaction"],mutationFn:e=>h.createTransaction(e),onSuccess(e){if(!e){j.A.error((0,c.jsxs)(d.Text,{as:"b",className:"inline-flex items-center gap-1",children:[(0,c.jsx)(N.O6y,{className:"h-5 w-5 overflow-visible"}),"Something went wrong"]}),{richColors:!0});return}let a=e.gateway_url;window.location.href=a},onError(e){e?j.A.error((0,c.jsxs)(d.Text,{as:"b",className:"inline-flex items-center gap-1",children:[(0,c.jsx)(N.O6y,{className:"h-5 w-5 overflow-visible"}),e.response.data.error]}),{richColors:!0}):j.A.error((0,c.jsxs)(d.Text,{as:"b",className:"inline-flex items-center gap-1",children:[(0,c.jsx)(N.O6y,{className:"h-5 w-5 overflow-visible"}),"Something went wrong"]}),{richColors:!0})}});return{createTransaction:e,isCreating:a}}(),r=C.Qg,{data:i,error:s,isLoading:l}=(0,v.a)({queryKey:["query_user_get_card_list"],queryFn:h.getMyTokens});(0,o.useEffect)(()=>{if(s){var e;j.A.error((0,c.jsxs)(d.Text,{as:"b",className:"inline-flex items-center gap-1",children:[(0,c.jsx)(N.O6y,{className:"h-5 w-5 overflow-visible"}),null==s?void 0:null===(e=s.response)||void 0===e?void 0:e.data.error]}),{richColors:!0})}},[s]);let p={credit:a.toString(),paymentMethod:""};return!i||l?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(k.Z,{className:"flex items-center justify-center"})}):(0,c.jsx)(m.l,{validationSchema:x,useFormProps:{defaultValues:p},onSubmit:e=>{console.log(e),n({amount:e.credit*C.Qg,token_uuid:e.paymentMethod.split("/")[1],type:e.paymentMethod.split("/")[0],redirect:window.location.href})},children:e=>{var a,n;let{register:s,control:o,formState:{errors:u},watch:m}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d.Input,{label:"Credits",type:"number",labelClassName:"text-sm font-medium text-gray-900",placeholder:t("topup-modal.enter-amount-placeholder"),...s("credit"),error:null===(a=u.credit)||void 0===a?void 0:a.message}),m("credit")&&m("credit")>0&&Number.isSafeInteger(Number(m("credit")))&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:(0,c.jsxs)("span",{className:"mt-2 inline-block",children:[t("topup-modal.amount-label"),":"," ",(0,c.jsx)("span",{className:"font-semibold italic",children:m("credit")&&m("credit")>0&&M(m("credit").toString(),r,"vi-VN")})]})}),(0,c.jsx)("div",{children:(0,c.jsxs)("span",{className:"mt-2 inline-block",children:[t("topup-modal.amount-in-words-label"),":"," ",(0,c.jsx)("span",{className:"font-semibold italic",children:m("credit")&&m("credit")>0&&(null===(n=S(m("credit").toString(),r,(0,T.getCookie)("NEXT_LOCALE")||"en",t("topup-modal.currency.dong")))||void 0===n?void 0:n.toString())})]})})]}),(0,c.jsx)("div",{className:"mt-8 flex justify-end gap-3",children:(0,c.jsx)(w.Qr,{control:o,name:"paymentMethod",render:e=>{var a;let{field:{value:n,onChange:r}}=e;return(0,c.jsxs)(d.RadioGroup,{value:n,setValue:r,className:"w-full space-y-2",children:[(0,c.jsx)("span",{className:"rizzui-input-label mb-1.5 block text-sm font-medium text-gray-900",children:t("topup-modal.payment-methods-label")}),i.length>0&&i.map(e=>{if("MC"==e.card)return{...e,name:e.number,icon:(0,c.jsx)(d.Text,{children:"MasterCard"}),type:"card"};if("VC"==e.card)return{...e,name:e.number,icon:(0,c.jsx)(d.Text,{children:"Visa"}),type:"card"};if("JC"==e.card)return{...e,name:e.number,icon:(0,c.jsx)(d.Text,{children:"JCB"}),type:"card"};if(Number(e.card).toString()==e.card){let a=R.find(a=>a.card==Number(e.card).toString());return{...e,name:e.number,icon:(0,c.jsx)(d.Text,{children:(null==a?void 0:a.name)||"Thẻ nội địa"}),type:"atm"}}return{...e,name:e.number,icon:(0,c.jsx)(b._02,{width:50}),type:"card"}}).map(e=>{let a=e.type+"/"+e.uuid;return(0,c.jsxs)(d.AdvancedRadio,{name:"paymentMethod",value:a,checked:a===n,contentClassName:"bg-gray-100 text-gray-900 flex items-center gap-2",children:[(0,c.jsx)(b._02,{}),e.icon,e.name,a==n&&(0,c.jsx)(b.l_A,{className:"ml-auto text-primary"})]},e.card_uid)}),i.length>0&&(0,c.jsx)(B,{t:t}),_({value:n}),u.paymentMethod&&(0,c.jsx)("div",{role:"alert",className:"rizzui-input-error-text mt-0.5 text-[13px] text-red",children:u&&(null===(a=u.paymentMethod)||void 0===a?void 0:a.message)})]})}})}),(0,c.jsx)("div",{className:"mt-8 flex justify-end gap-3",children:(0,c.jsxs)(d.Button,{type:"submit",className:"w-full gap-3",isLoading:l,children:[(0,c.jsx)(N.SqI,{}),t("topup-modal.to-payment-gateway")]})})]})}})}var V=t(93191),P=t(69038);(n=i||(i={})).ONEPAY="onepay",n.BRAINTREE="braintree";var q=t(97664),z=t.n(q);!function(e){let a="api/user/billing/braintree";e.generateSaleToken=async()=>(await (0,g.sg)((0,p.Z)(a,"generate-sales-token"))).data.data,e.createTransactionSales=async e=>(await (0,g.sg)((0,p.Z)(a,"create-sales-transaction"),e)).data.data}(s||(s={}));var D=t(41349),K=t(88864),F=t(7435),U=t(74285),L=t(72655),G=t(90580);function Q(e){var a;let{defaultCredit:t}=e,[n,r]=(0,o.useState)(null),[i,l]=(0,o.useState)(t),{salesToken:m,isGeneratingSalesToken:p}=function(){let{data:e,isPending:a}=(0,v.a)({queryKey:["generate_braintree_sale_token"],queryFn:s.generateSaleToken,refetchInterval:!1,staleTime:1/0});return{salesToken:e,isGeneratingSalesToken:a}}(),{createSaleTransaction:g,isCreatingSaleTransaction:h,createSaleTransactionResult:f,isCreateSaleTransactionError:y,createSaleTransactionError:x}=function(){let{data:e,isPending:a,mutate:t,isError:n,error:r}=(0,E.D)({mutationKey:["create_braintree_sale_transaction"],mutationFn:e=>s.createTransactionSales(e)});return{createSaleTransactionResult:e,isCreatingSaleTransaction:a,createSaleTransaction:t,isCreateSaleTransactionError:n,createSaleTransactionError:r}}(),[w,b]=(0,o.useState)(!1),[C,A]=(0,o.useState)(!1),{closeModal:Z,setPreventClose:B}=(0,D.d)(),{openConfirmationModal:R,closeConfirmationModal:O}=(0,U.s)(),_=(0,K.I0)(),I=(0,u.useTranslations)("braintree-modal");(0,o.useEffect)(()=>{m&&!n&&z().create({authorization:m,container:".braintree-drop-in-container",dataCollector:!0,paypalCredit:{amount:10,flow:"checkout"}}).then(e=>r(e)).catch(()=>j.A.error((0,c.jsxs)(d.Text,{as:"b",className:"inline-flex items-center gap-1",children:[(0,c.jsx)(N.O6y,{className:"h-5 w-5 overflow-visible"}),I("create-braintree-instance-failed")]}),{richColors:!0})).catch(Z)},[m]),(0,o.useEffect)(()=>{f&&(_((0,G.Mn)()),_((0,F.kN)()),j.A.success((0,c.jsxs)(d.Text,{as:"b",className:"inline-flex items-center gap-1",children:[(0,c.jsx)(N.O6y,{className:"h-5 w-5 overflow-visible"}),I("create-sale-transaction-successfully")]}),{richColors:!0}),Z())},[f]),(0,o.useEffect)(()=>{y&&(j.A.error((0,c.jsxs)(d.Text,{as:"b",className:"inline-flex items-center gap-1",children:[(0,c.jsx)(N.O6y,{className:"h-5 w-5 overflow-visible"}),I("create-sale-transaction-fail")]}),{richColors:!0}),Z())},[y,x]),(0,o.useEffect)(()=>{B(w||C)},[w,C]);let V=()=>{b(!0),P().then(()=>{A(!0)}).catch(e=>{j.A.error((0,c.jsxs)(d.Text,{as:"b",className:"inline-flex items-center gap-1",children:[(0,c.jsx)(N.O6y,{className:"h-5 w-5 overflow-visible"}),I("request-checkout-fail")]}),{richColors:!0})}).finally(()=>{b(!1)})},P=async()=>{if(!n)return;let{deviceData:e,nonce:a,details:t}=await n.requestPaymentMethod();g({amount:i,nonce:a,device_data:e})},q=p||!n;return(0,c.jsxs)(c.Fragment,{children:[!q&&(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(d.Text,{children:I("enter-amount-you-want-to-deposit")}),(0,c.jsx)(d.Input,{onChange:e=>{Number.isNaN(Number.parseInt(e.target.value))||l(Number.parseInt(e.target.value))},value:i,type:"number",className:"rounded-md bg-white"}),i>0&&Number.isSafeInteger(i)&&(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsxs)("span",{className:"mt-2 inline-block",children:[I("amount-label"),":"," ",(0,c.jsx)("span",{className:"font-semibold italic",children:M(i.toString(),1,"en-US")})]})}),(0,c.jsx)("div",{children:(0,c.jsxs)("span",{className:"mt-2 inline-block",children:[I("amount-in-words-label"),":"," ",(0,c.jsx)("span",{className:"font-semibold italic",children:null===(a=S(i.toString(),1,(0,T.getCookie)("NEXT_LOCALE")||"en",i>1?I("currency.dollars"):I("currency.dollar")))||void 0===a?void 0:a.toString()})]})})]})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("div",{hidden:q,className:"braintree-drop-in-container"}),q&&(0,c.jsx)("div",{className:"flex h-32 w-full justify-center",children:(0,c.jsx)(k.Z,{className:"flex items-center justify-center"})}),!q&&(0,c.jsx)(d.Button,{disabled:h||w||C,className:"w-full",color:"primary",onClick:()=>{if(i<=0){j.A.error((0,c.jsxs)(d.Text,{as:"b",className:"inline-flex items-center gap-1",children:[(0,c.jsx)(N.O6y,{className:"h-5 w-5 overflow-visible"}),I("invalid-amount")]}),{richColors:!0});return}R({title:I("confirm.title"),message:I.rich("confirm.message",{creditsBlock:()=>(0,c.jsxs)(d.Text,{className:"inline-flex items-center gap-1 font-bold text-gray-700",children:[Number(i).toLocaleString("en-US",{maximumFractionDigits:3}),(0,c.jsx)(L.u70,{className:"text-yellow-500"})]})}),onOk:V,onCancel:O})},children:I("checkout")})]})]})}function H(e){let{defaultCredits:a}=e;(0,u.useTranslations)("payment.balance");let t=a||50,n=(0,V.NL)(),{data:r,isLoading:s}=(0,v.a)({queryKey:["user_query_my_payment_profiles"],queryFn:P.Nj.getMe,refetchInterval:!1});if((0,o.useEffect)(()=>()=>{n.removeQueries({queryKey:["user_query_my_payment_profiles"]})},[]),s||!r)return(0,c.jsx)(k.Z,{className:"flex items-center justify-center min-h-32"});switch(r.gateway){case i.ONEPAY:return(0,c.jsx)(I,{defaultDeposit:t});case i.BRAINTREE:return(0,c.jsx)(Q,{defaultCredit:t});default:return(0,c.jsx)(c.Fragment,{})}}function J(e){let{defaultCredits:a}=e,t=(0,u.useTranslations)("payment.balance"),n=(0,l.useRouter)();return(0,o.useEffect)(()=>()=>{window&&n.push(window.location.pathname)},[]),(0,c.jsxs)("div",{className:"m-auto p-6",children:[(0,c.jsx)(d.Title,{as:"h3",className:"mb-6 text-lg",children:t("topup-modal.title")}),(0,c.jsx)("div",{className:"mt-10 grid grid-cols-1 gap-5 ",children:(0,c.jsx)(H,{defaultCredits:a})})]})}},90580:function(e,a,t){t.d(a,{Mn:function(){return c},ZP:function(){return o}});var n=t(42736),r=t(31116),i=t(49655),s=t(11525);let c=(0,r.PH)("auth/fetchAuthUserAsync");function*l(){try{let e=yield(0,i.RE)(n.Z.getAuthUser);if(!e)throw Error("User not found");yield(0,i.gz)((0,s.QV)(e))}catch(e){yield(0,i.gz)((0,s.Gl)())}}function*o(){yield(0,i.ib)(c,l)}},11525:function(e,a,t){t.d(a,{Gl:function(){return i},QV:function(){return r}});let n=(0,t(31116).oM)({name:"auth",initialState:{current:null},reducers:{setAuth(e,a){e.current=a.payload},getAuthError(e){e.current=null},clearAuth(e){e.current=null}}}),{setAuth:r,getAuthError:i,clearAuth:s}=n.actions;a.ZP=n.reducer}}]);